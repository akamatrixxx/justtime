@startuml
title 通知時間算出シーケンス（現在実装準拠・簡易版）

participant "FeedbackService\n(P4)" as P4
participant "NotificationTimeService\n(P5)" as P5

== 通知時間算出要求 ==
P4 -> P5 : calcNextTime(currentNotifyTime, feedbackType)

== フィードバック種別判定 ==
alt feedbackType == tooEarly
  P5 -> P5 : 30分後へ加算

else feedbackType == tooLate
  P5 -> P5 : 30分前へ減算

else feedbackType == goodTiming
  P5 -> P5 : 変更なし
end

== 通知時間返却 ==
P5 --> P4 : adjustedTime

@enduml
